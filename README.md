# PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…· - Electronæ¡Œé¢ç‰ˆ

## ğŸš€ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…·çš„Electronæ¡Œé¢ç‰ˆæœ¬ï¼Œæä¾›ç°ä»£åŒ–çš„å›¾å½¢ç•Œé¢å’Œè·¨å¹³å°æ”¯æŒã€‚ç”¨æˆ·æ— éœ€å®‰è£…Pythonç¯å¢ƒï¼Œå³å¯ç›´æ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ–¥ï¸ **ç°ä»£åŒ–ç•Œé¢** - åŸºäºWebæŠ€æœ¯çš„ç¾è§‚ç”¨æˆ·ç•Œé¢
- ğŸ“¦ **å¼€ç®±å³ç”¨** - æ— éœ€å®‰è£…Pythonï¼Œå†…ç½®æ‰€æœ‰ä¾èµ–
- ğŸ”„ **æ‹–æ‹½æ”¯æŒ** - æ”¯æŒæ‹–æ‹½PDFæ–‡ä»¶åˆ°åº”ç”¨çª—å£
- ğŸ“Š **å®æ—¶è¿›åº¦** - æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œè¯¦ç»†æ—¥å¿—
- ğŸŒ **è·¨å¹³å°** - æ”¯æŒWindowsã€macOSå’ŒLinux
- âš¡ **é«˜æ€§èƒ½** - åŸºäºElectronå’ŒNode.js

## ğŸ“ é¡¹ç›®ç»“æ„

```
pdf-tools/
â”œâ”€â”€ src/                          # Electronæºä»£ç 
â”‚   â”œâ”€â”€ main.js                   # ä¸»è¿›ç¨‹
â”‚   â””â”€â”€ renderer/                 # æ¸²æŸ“è¿›ç¨‹
â”‚       â”œâ”€â”€ index.html           # ä¸»ç•Œé¢
â”‚       â”œâ”€â”€ styles.css           # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ renderer.js          # å‰ç«¯é€»è¾‘
â”œâ”€â”€ python-backend/               # Pythonåç«¯
â”‚   â”œâ”€â”€ pdf_bookmark_tool.py     # æ ¸å¿ƒå¤„ç†å¼•æ“
â”‚   â””â”€â”€ requirements.txt         # Pythonä¾èµ–
â”œâ”€â”€ assets/                       # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ icon.png                 # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ scripts/                      # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ build.bat                # Windowsæ„å»ºè„šæœ¬
â”œâ”€â”€ package.json                 # Node.jsé…ç½®
â”œâ”€â”€ build-setup.js               # æ„å»ºå‡†å¤‡è„šæœ¬
â””â”€â”€ README.md           # æœ¬æ–‡æ¡£
```

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ææ¡ä»¶

1. **Node.js** (v16æˆ–æ›´é«˜ç‰ˆæœ¬)
2. **Python** (v3.7æˆ–æ›´é«˜ç‰ˆæœ¬)
3. **Git** (å¯é€‰ï¼Œç”¨äºç‰ˆæœ¬æ§åˆ¶)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd pdf-tools
   ```

2. **å®‰è£…Node.jsä¾èµ–**
   ```bash
   npm install
   ```

3. **å®‰è£…Pythonä¾èµ–**
   ```bash
   cd python-backend
   pip install -r requirements.txt
   cd ..
   ```

4. **è¿è¡Œå¼€å‘ç‰ˆæœ¬**
   ```bash
   npm run dev
   ```

## ğŸ—ï¸ æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶

### Windowsæ„å»º

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰**
```bash
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ
scripts\build.bat
```

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ„å»º**
```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºWindowsç‰ˆæœ¬
npm run build-win
```

### macOSæ„å»º

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸“ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰**
```bash
# åœ¨macOSç³»ç»Ÿä¸Šè¿è¡Œ
./scripts/build-mac.sh
```

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ„å»º**
```bash
# ç¡®ä¿åœ¨macOSç³»ç»Ÿä¸Šè¿è¡Œ
npm install
npm run build-mac
```

**æ³¨æ„äº‹é¡¹**ï¼š
- Macåº”ç”¨æ„å»ºå»ºè®®åœ¨macOSç³»ç»Ÿä¸Šè¿›è¡Œï¼Œä»¥ç¡®ä¿æœ€ä½³å…¼å®¹æ€§
- éœ€è¦icon.icnsæ–‡ä»¶ï¼ˆè„šæœ¬ä¼šè‡ªåŠ¨ä»icon.pngç”Ÿæˆï¼‰
- é¦–æ¬¡è¿è¡Œæ„å»ºçš„åº”ç”¨æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨ç³»ç»Ÿåå¥½è®¾ç½®ä¸­å…è®¸è¿è¡Œ

### Linuxæ„å»º

```bash
# åœ¨ä»»ä½•ç³»ç»Ÿä¸Šéƒ½å¯ä»¥æ„å»ºLinuxç‰ˆæœ¬
npm install
npm run build-linux
```

### è·¨å¹³å°æ„å»º

**ä½¿ç”¨å¿«é€Ÿå¼€å§‹è„šæœ¬ï¼ˆå…¨å¹³å°æ”¯æŒï¼‰**ï¼š

Windowsç”¨æˆ·ï¼š
```cmd
# åŒå‡»è¿è¡Œ
å¿«é€Ÿå¼€å§‹.bat
```

macOS/Linuxç”¨æˆ·ï¼š
```bash
# æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
chmod +x å¿«é€Ÿå¼€å§‹.sh

# è¿è¡Œè„šæœ¬
./å¿«é€Ÿå¼€å§‹.sh
```

**æ‰‹åŠ¨æ„å»ºæ‰€æœ‰å¹³å°**ï¼š
```bash
npm run build
```

### ğŸš€ è‡ªåŠ¨åŒ–æ„å»ºï¼ˆGitHub Actionsï¼‰

å¦‚æœæ‚¨çš„é¡¹ç›®æ‰˜ç®¡åœ¨GitHubä¸Šï¼Œå¯ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–æ„å»ºï¼š

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- âœ… è‡ªåŠ¨æ„å»ºWindowsã€macOSã€Linuxä¸‰ä¸ªå¹³å°
- âœ… è‡ªåŠ¨ç”ŸæˆMacå›¾æ ‡æ–‡ä»¶ï¼ˆä»PNGè½¬æ¢ï¼‰
- âœ… åœ¨æ¨é€ä»£ç æˆ–åˆ›å»ºæ ‡ç­¾æ—¶è‡ªåŠ¨è§¦å‘
- âœ… æ”¯æŒæ‰‹åŠ¨è§¦å‘æ„å»º
- âœ… è‡ªåŠ¨åˆ›å»ºReleaseå¹¶ä¸Šä¼ å®‰è£…åŒ…

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. ç¡®ä¿é¡¹ç›®å·²æ¨é€åˆ°GitHub
2. åˆ›å»ºæ ‡ç­¾è§¦å‘Releaseæ„å»ºï¼š
   ```bash
   git tag v2.0.0
   git push origin v2.0.0
   ```
3. æˆ–è€…åœ¨GitHubç•Œé¢æ‰‹åŠ¨è§¦å‘ï¼š
   - è¿›å…¥Actionsé¡µé¢
   - é€‰æ‹©"æ„å»ºè·¨å¹³å°åº”ç”¨"å·¥ä½œæµ
   - ç‚¹å‡»"Run workflow"

**æ„å»ºäº§ç‰©**ï¼š
- Windows: åœ¨Actionsçš„Artifactsä¸­ä¸‹è½½
- macOS: è‡ªåŠ¨ç”Ÿæˆ.dmgå®‰è£…åŒ…
- Linux: ç”ŸæˆAppImageä¾¿æºåº”ç”¨

## ğŸ–¼ï¸ å›¾æ ‡æ–‡ä»¶è¯´æ˜

ä¸åŒå¹³å°éœ€è¦ä¸åŒæ ¼å¼çš„å›¾æ ‡æ–‡ä»¶ï¼š

| å¹³å°    | æ–‡ä»¶å             | æ ¼å¼ | è‡ªåŠ¨ç”Ÿæˆ         |
| ------- | ------------------ | ---- | ---------------- |
| Windows | `assets/icon.ico`  | ICO  | âŒ éœ€æ‰‹åŠ¨å‡†å¤‡     |
| macOS   | `assets/icon.icns` | ICNS | âœ… ä»icon.pngç”Ÿæˆ |
| Linux   | `assets/icon.png`  | PNG  | âœ… å·²å­˜åœ¨         |

**Macå›¾æ ‡è‡ªåŠ¨ç”Ÿæˆ**ï¼š
- æ„å»ºè„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦å­˜åœ¨`icon.icns`æ–‡ä»¶
- å¦‚æœä¸å­˜åœ¨ï¼Œä¼šå°è¯•ä»`icon.png`ç”Ÿæˆï¼ˆéœ€è¦macOSç³»ç»Ÿçš„`sips`å’Œ`iconutil`å·¥å…·ï¼‰
- ç”Ÿæˆçš„å›¾æ ‡åŒ…å«æ‰€æœ‰å¿…éœ€çš„å°ºå¯¸ï¼ˆ16x16åˆ°1024x1024ï¼‰

**Windowså›¾æ ‡å‡†å¤‡**ï¼š
- éœ€è¦æ‰‹åŠ¨åˆ›å»º`assets/icon.ico`æ–‡ä»¶
- å¯ä»¥ä½¿ç”¨åœ¨çº¿å·¥å…·å°†PNGè½¬æ¢ä¸ºICOæ ¼å¼
- æ¨èå°ºå¯¸ï¼š16x16, 32x32, 48x48, 256x256

## ğŸ“¦ æ‰“åŒ…è¾“å‡º

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶å°†åœ¨ `dist/` ç›®å½•ä¸­ï¼š

- **Windows**: `PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…· Setup 2.0.0.exe` (å®‰è£…åŒ…)
- **macOS**: `PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…·-2.0.0.dmg` (ç£ç›˜æ˜ åƒ)
- **Linux**: `PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…·-2.0.0.AppImage` (ä¾¿æºåº”ç”¨)

## ğŸš¨ æ„å»ºæ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. Macæ„å»ºå¤±è´¥**
```
Error: Application entry file "dist/electron/main.js" does not exist
```
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿åœ¨macOSç³»ç»Ÿä¸Šè¿è¡Œï¼Œæˆ–ä½¿ç”¨GitHub Actionsç­‰CIæœåŠ¡

**2. Windowså›¾æ ‡ç¼ºå¤±è­¦å‘Š**
```
Warning: icon.ico not found
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¸‹è½½PNG to ICOè½¬æ¢å·¥å…·æˆ–ä½¿ç”¨åœ¨çº¿æœåŠ¡
- å°†`assets/icon.png`è½¬æ¢ä¸º`assets/icon.ico`
- æˆ–ä¸´æ—¶æ³¨é‡Šæ‰package.jsonä¸­çš„Windowså›¾æ ‡é…ç½®

**3. Pythonä¾èµ–é—®é¢˜**
```
Error: Python script failed to run
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿Pythonå·²æ­£ç¡®å®‰è£…
- åœ¨`python-backend`ç›®å½•è¿è¡Œ`pip install -r requirements.txt`
- æ£€æŸ¥PyMuPDFç­‰å…³é”®ä¾èµ–æ˜¯å¦å®‰è£…æˆåŠŸ

**4. æƒé™é—®é¢˜ï¼ˆmacOS/Linuxï¼‰**
```
Permission denied: ./å¿«é€Ÿå¼€å§‹.sh
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
chmod +x å¿«é€Ÿå¼€å§‹.sh
chmod +x scripts/build-mac.sh
```

### è·å¾—å¸®åŠ©

å¦‚æœé‡åˆ°å…¶ä»–æ„å»ºé—®é¢˜ï¼š
1. æ£€æŸ¥Node.jså’Œnpmç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚
2. æ¸…ç†node_moduleså¹¶é‡æ–°å®‰è£…ï¼š`rm -rf node_modules && npm install`
3. æŸ¥çœ‹Electron Builderæ–‡æ¡£ï¼šhttps://www.electron.build/
4. åœ¨é¡¹ç›®Issuesä¸­æœç´¢ç±»ä¼¼é—®é¢˜

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### ç”Ÿäº§æ¨¡å¼
```bash
npm start
```

### æ„å»ºå‘å¸ƒç‰ˆ
```bash
npm run build
```

## ğŸ”§ é…ç½®é€‰é¡¹

### Electron Builderé…ç½®

åœ¨ `package.json` ä¸­çš„ `build` å­—æ®µå¯ä»¥é…ç½®ï¼š

- **åº”ç”¨ä¿¡æ¯** - åç§°ã€ç‰ˆæœ¬ã€æè¿°
- **å›¾æ ‡è®¾ç½®** - ä¸åŒå¹³å°çš„å›¾æ ‡æ–‡ä»¶
- **æ‰“åŒ…é€‰é¡¹** - è¾“å‡ºæ ¼å¼ã€æ¶æ„æ”¯æŒ
- **å®‰è£…ç¨‹åº** - NSISé…ç½®ã€å¿«æ·æ–¹å¼ç­‰

### ä¸»è¦é…ç½®é¡¹

```json
{
  "build": {
    "appId": "com.pdftools.bookmark",
    "productName": "PDFè‡ªåŠ¨ä¹¦ç­¾å·¥å…·",
    "win": {
      "target": "nsis",
      "icon": "assets/icon.ico"
    },
    "nsis": {
      "oneClick": false,
      "allowToChangeInstallationDirectory": true,
      "createDesktopShortcut": true
    }
  }
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥ - ç¼ºå°‘Python**
   ```
   è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿ç³»ç»Ÿå·²å®‰è£…Python 3.7+å¹¶æ·»åŠ åˆ°PATH
   ```

2. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   # æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
   npm cache clean --force
   rm -rf node_modules
   npm install
   ```

3. **Pythonåç«¯æ— æ³•è¿è¡Œ**
   ```bash
   # æ£€æŸ¥Pythonä¾èµ–
   cd python-backend
   pip install -r requirements.txt
   python pdf_bookmark_tool.py --help
   ```

4. **å›¾æ ‡ä¸æ˜¾ç¤º**
   ```
   è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿assets/ç›®å½•ä¸‹æœ‰æ­£ç¡®æ ¼å¼çš„å›¾æ ‡æ–‡ä»¶
   - Windows: icon.ico
   - macOS: icon.icns  
   - Linux: icon.png
   ```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨å¼€å‘è€…å·¥å…·è¿›è¡Œè°ƒè¯•ï¼š
```bash
npm run dev
```

## ğŸ“‹ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **å‰ç«¯åŠŸèƒ½** - ä¿®æ”¹ `src/renderer/` ä¸‹çš„æ–‡ä»¶
2. **åç«¯åŠŸèƒ½** - ä¿®æ”¹ `python-backend/` ä¸‹çš„Pythonè„šæœ¬
3. **ä¸»è¿›ç¨‹åŠŸèƒ½** - ä¿®æ”¹ `src/main.js`

### IPCé€šä¿¡

å‰ç«¯ä¸ä¸»è¿›ç¨‹é€šè¿‡IPCé€šä¿¡ï¼š

```javascript
// æ¸²æŸ“è¿›ç¨‹ -> ä¸»è¿›ç¨‹
const result = await ipcRenderer.invoke('process-pdf', options);

// ä¸»è¿›ç¨‹ -> æ¸²æŸ“è¿›ç¨‹
mainWindow.webContents.send('process-output', data);
```

### æ ·å¼è‡ªå®šä¹‰

ä¿®æ”¹ `src/renderer/styles.css` æ¥è‡ªå®šä¹‰ç•Œé¢æ ·å¼ã€‚

## ğŸš€ éƒ¨ç½²å‘å¸ƒ

### å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] æ›´æ–°ç‰ˆæœ¬å· (`package.json`)
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- [ ] æ£€æŸ¥å›¾æ ‡æ–‡ä»¶
- [ ] æ„å»ºæ‰€æœ‰ç›®æ ‡å¹³å°
- [ ] æµ‹è¯•å®‰è£…åŒ…
- [ ] å‡†å¤‡å‘å¸ƒè¯´æ˜

### è‡ªåŠ¨åŒ–å‘å¸ƒ

å¯ä»¥é…ç½®GitHub Actionsæˆ–å…¶ä»–CI/CDå·¥å…·è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒï¼š

```yaml
# .github/workflows/build.yml
name: Build and Release
on:
  push:
    tags:
      - 'v*'
jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest, macos-latest, ubuntu-latest]
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
      - run: npm install
      - run: npm run build
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚è¯¦è§LICENSEæ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ï¼å¦‚æœæ‚¨æƒ³è´¡çŒ®ä»£ç ï¼š

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æœç´¢å·²æœ‰çš„Issues
3. åˆ›å»ºæ–°çš„Issueæè¿°é—®é¢˜

---

**å¼€å‘å›¢é˜Ÿ**: PDF Tools Team  
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ 